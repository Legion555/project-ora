(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,a,t){},26:function(e,a,t){},44:function(e,a,t){"use strict";t.r(a);var s=t(1),c=t(2),n=t.n(c),l=t(17),r=t.n(l),o=(t(25),t(3)),i=(t(26),t(4)),d=t.n(i),u=Object(c.createContext)(),j=function(e){var a=Object(c.useState)({}),t=Object(o.a)(a,2),n=t[0],l=t[1];return Object(s.jsx)(u.Provider,{value:[n,l],children:e.children})},h=function(e){var a=Object(c.useContext)(u),t=Object(o.a)(a,2),n=(t[0],t[1]),l=Object(c.useState)(""),r=Object(o.a)(l,2),i=r[0],j=r[1],h=Object(c.useState)("login"),b=Object(o.a)(h,2),m=b[0],O=b[1],p=Object(c.useState)(""),g=Object(o.a)(p,2),x=g[0],f=g[1],v=Object(c.useState)(""),k=Object(o.a)(v,2),w=k[0],C=k[1],N=Object(c.useState)(""),S=Object(o.a)(N,2),D=S[0],y=S[1],I=Object(c.useState)(""),T=Object(o.a)(I,2),E=T[0],A=T[1],P=Object(c.useState)(""),_=Object(o.a)(P,2),L=_[0],M=_[1];Object(c.useEffect)((function(){var a=localStorage.getItem("userEmail"),t=localStorage.getItem("userPassword");if(null!==a){var s={email:a,password:t};d.a.post("/api/users/login",s).then((function(t){d.a.get("/api/users",{params:{email:a}}).then((function(a){var t=a.data;n(t),e.setLoggedIn(!0)})).catch((function(e){console.log(e)}))}))}}),[]);return Object(s.jsxs)("div",{className:"auth-container",children:["login"===m&&Object(s.jsxs)("div",{className:"login-container",children:[Object(s.jsx)("h1",{children:"Login with an existing account"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{className:"email"===i[0]?"error":void 0,onChange:function(e){return f(e.target.value)},placeholder:"email"===i[0]?i[1]:"Email",name:"email",value:x}),Object(s.jsx)("input",{className:"password"===i[0]?"error":void 0,onChange:function(e){return C(e.target.value)},placeholder:"password"===i[0]?i[1]:"Password",name:"password",value:w}),Object(s.jsx)("button",{onClick:function(a,t,s){a.preventDefault();var c={email:x,password:w};d.a.post("/api/users/login",c).then((function(a){switch(console.log(a.data),a.data){case'"email" is not allowed to be empty':j(["email","Email cannot be empty"]);break;case'"email" length must be at least 6 characters long':j(["email","Email must be at least 6 characters long"]),f("");break;case'"email" must be a valid email':j(["email","Must be a valid email"]),f("");break;case"email-not-found":j(["email","Email not found"]);break;case'"password" is not allowed to be empty':j(["password","Password cannot be empty"]);break;case'"password" length must be at least 6 characters long':j(["password","Password is too short"]),C("");break;case"invalid-password":j(["password","Invalid password"]),C("");break;case"user-not-authorized":j("not-authorized"),f(""),C("");break;default:var t=a.headers["auth-token"];localStorage.setItem("userToken",t),localStorage.setItem("userEmail",x),localStorage.setItem("userPassword",w),e.setLoggedIn(!0)}d.a.get("/api/users",{params:{email:x}}).then((function(e){var a=e.data;n(a)})).catch((function(e){console.log("Error: "+e)}))}))},children:"Login"})]}),"not-authorized"===i&&Object(s.jsxs)("p",{children:["Not approved yet.",Object(s.jsx)("br",{}),"Please wait for Manager's approval."]}),Object(s.jsx)("p",{className:"register-link",onClick:function(){return O("register")},children:"Register a new account"})]}),"register"===m&&Object(s.jsxs)("div",{className:"register-container",children:[Object(s.jsx)("h1",{children:"Register a new account"}),"registered"!==i&&Object(s.jsxs)("form",{className:"input-main",children:[Object(s.jsx)("input",{className:"name"===i[0]?"error":void 0,onChange:function(e){return y(e.target.value)},placeholder:"name"===i[0]?i[1]:"Name",name:"name",value:D}),Object(s.jsx)("input",{className:"email"===i[0]?"error":void 0,onChange:function(e){return A(e.target.value)},placeholder:"email"===i[0]?i[1]:"Email",name:"email",value:E}),Object(s.jsx)("input",{className:"password"===i[0]?"error":void 0,onChange:function(e){return M(e.target.value)},placeholder:"password"===i[0]?i[1]:"Password",name:"password",value:L}),Object(s.jsx)("button",{onClick:function(e){e.preventDefault();var a={name:D,email:E,password:L};d.a.post("/api/users/register",a).then((function(e){switch(e.data){case'"name" is not allowed to be empty':j(["name","Name cannot be empty"]);break;case'"email" is not allowed to be empty':j(["email","Email cannot be empty"]);break;case'"email" length must be at least 6 characters long':j(["email","Email must be at least 6 characters long"]),A("");break;case'"email" must be a valid email':j(["email","Must be a valid email"]),A("");break;case"email-duplicate":j(["email","doubleEmails"]),A("");break;case'"password" is not allowed to be empty':j(["password","Password cannot be empty"]);break;case'"password" length must be at least 6 characters long':j(["password","Password is too short"]),M("");break;default:j("registered"),y(""),A(""),M("")}})).catch((function(e){console.log(e)}))},children:"Register"})]}),"registered"===i&&Object(s.jsxs)("p",{children:["Successfully registered!",Object(s.jsx)("br",{}),"Please wait for Manager's approval."]}),Object(s.jsx)("p",{className:"login-link",onClick:function(){return O("login")},children:"Login with an existing account"})]})]})},b=function(e){return Object(s.jsx)("div",{className:"teachers-container",children:Object(s.jsx)("div",{className:"teacher-cards",children:e.teachers.map((function(a){return Object(s.jsxs)("div",{className:"class-card",children:[Object(s.jsx)("h3",{children:a.name}),Object(s.jsxs)("p",{children:["Auth status: ",a.isAuthed?"Authorized":"Unauthorized"]}),Object(s.jsx)("button",{onClick:function(t){return function(a,t){a.preventDefault(),d.a.put("/api/teachers/authTeacher/"+t).then((function(a){console.log(a.data),e.readAllTeachers()})).catch((function(e){console.log(e)}))}(t,a._id)},children:"Authorize"}),Object(s.jsx)("button",{onClick:function(t){return function(a,t){a.preventDefault(),d.a.delete("/api/teachers/deleteTeacher/"+t).then((function(a){console.log(a.data),e.readAllTeachers()})).catch((function(e){console.log(e)}))}(t,a._id)},children:"Remove teacher"})]},a._id)}))})})},m=function(e){var a=Object(c.useContext)(u),t=Object(o.a)(a,2),n=t[0],l=(t[1],Object(c.useState)("")),r=Object(o.a)(l,2),i=r[0],j=r[1],h=Object(c.useState)(""),b=Object(o.a)(h,2),m=b[0],O=b[1];return Object(s.jsxs)("div",{className:"classes-container",children:[Object(s.jsxs)("form",{className:"add-class",children:[Object(s.jsx)("input",{type:"text",value:i,placeholder:"Class name",onChange:function(e){return j(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:m,placeholder:"Class book",onChange:function(e){return O(e.target.value)}}),Object(s.jsx)("button",{onClick:function(a){a.preventDefault();var t=localStorage.getItem("userToken"),s={name:i,book:m,localTeacherName:n.name,localTeacherId:n._id};d.a.post("/api/classes/create",s,{headers:{"auth-token":t}}).then((function(a){var s=n.classes,c={name:i,date:Date.now()};s.push(c),d.a.put("/api/teachers/addClass",s,{headers:{"auth-token":t}}).then((function(a){e.readAllClasses()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},children:"Add class"})]}),Object(s.jsx)("div",{className:"class-cards",children:e.classes.map((function(a){return Object(s.jsxs)("div",{className:"class-card",children:[Object(s.jsx)("h3",{children:a.name}),Object(s.jsxs)("p",{children:["Book: ",a.book]}),Object(s.jsxs)("p",{children:["Students: ",a.students.length]}),Object(s.jsx)("button",{onClick:function(t){return function(a){var t=localStorage.getItem("userToken");d.a.get("./api/classes/"+a,{headers:{"auth-token":t}}).then((function(a){console.log(a.data[0]),e.setClassData(a.data[0]),e.setView("class")})).catch((function(e){console.error("Error: "+e)}))}(a._id)},children:"View class"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{onClick:function(t){return function(a){d.a.delete("/api/classes/delete/"+a).then((function(a){console.log("Class deleted"),e.readAllClasses()})).catch((function(e){console.log(e)}))}(a._id)},className:"delete-class-button",children:"Delete class"})]},a._id)}))})]})},O=function(e){var a=Object(c.useState)(""),t=Object(o.a)(a,2),n=t[0],l=t[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),u=i[0],j=i[1],h=function(a){var t=e.classData,s=t.students.map((function(e){return e._id})).indexOf(a);t.students.splice(s,1),d.a.put("/api/classes/deleteStudent",t).then((function(a){console.log(a.data),function(a){var t=localStorage.getItem("userToken");d.a.get("./api/classes/"+a,{headers:{"auth-token":t}}).then((function(a){console.log(a.data[0]),e.setClassData(a.data[0])})).catch((function(e){console.error("Error: "+e)}))}(e.classData._id)})).catch((function(e){console.log(e)}))};return Object(s.jsxs)("div",{className:"class-container",children:[Object(s.jsxs)("div",{className:"class-details-container",children:[Object(s.jsx)("h2",{children:e.classData.name}),Object(s.jsx)("h2",{children:e.classData.book}),Object(s.jsx)("h2",{children:e.classData.localTeacher})]}),Object(s.jsxs)("form",{className:"add-student-container",children:[Object(s.jsx)("input",{type:"text",value:n,placeholder:"name...",onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:u,placeholder:"age...",onChange:function(e){return j(e.target.value)}}),Object(s.jsx)("button",{onClick:function(a){a.preventDefault();var t=e.classData,s={name:n,age:u,class:e.classData.name,_id:Math.floor(1e5*Math.random())};t.students.push(s),d.a.put("/api/classes/createStudent",e.classData).then((function(e){console.log(e.data),l(""),j("")})).catch((function(e){console.log(e)}))},children:"Add student"})]}),Object(s.jsx)("div",{className:"students-container",children:e.classData.students.map((function(e){return Object(s.jsxs)("div",{className:"student-card",children:[Object(s.jsx)("h3",{children:e.name}),Object(s.jsxs)("p",{children:["Age: ",e.age]}),Object(s.jsx)("button",{onClick:function(a){return h(e._id)},children:"Remove student"})]})}))})]})},p=t(19),g=t(7),x=t(8),f=t(18),v=t.p+"static/media/circle.423a605e.png",k=function(e){var a=Object(c.useContext)(u),t=Object(o.a)(a,2),n=t[0],l=(t[1],Object(c.useState)("default")),r=Object(o.a)(l,2),i=r[0],j=r[1],h=Object(c.useState)({}),k=Object(o.a)(h,2),w=k[0],C=k[1],N=Object(c.useState)({}),S=Object(o.a)(N,2),D=S[0],y=S[1],I=Object(c.useState)({}),T=Object(o.a)(I,2),E=T[0],A=T[1],P=function(){var e=localStorage.getItem("userToken");d.a.get("./api/teachers",{headers:{"auth-token":e}}).then((function(e){console.log(e.data),C(e.data),j("teachers")})).catch((function(e){console.error("Error: "+e)}))},_=function(){var e=localStorage.getItem("userToken");d.a.get("./api/classes",{headers:{"auth-token":e}}).then((function(e){y(e.data),j("classes")})).catch((function(e){console.error("Error: "+e)}))};return Object(s.jsxs)("div",{className:"dashboard",children:[Object(s.jsxs)("div",{className:"navigation-container",children:[Object(s.jsxs)("div",{className:"links",children:[Object(s.jsx)("img",{src:v,alt:"profile",width:"60px"}),Object(s.jsxs)("p",{children:[n.name,Object(s.jsx)("br",{}),Object(s.jsx)("i",{children:n.authority})]}),Object(s.jsxs)("p",{className:"link",onClick:function(){return j("default")},children:[Object(s.jsx)(f.a,{className:"icon"}),Object(s.jsx)("br",{}),"Dashboard"]}),"admin"===n.authority&&Object(s.jsxs)("p",{className:"link",onClick:P,children:[Object(s.jsx)(g.a,{className:"icon"}),Object(s.jsx)("br",{}),"Teachers"]}),Object(s.jsxs)("p",{className:"link",onClick:_,children:[Object(s.jsx)(x.a,{className:"icon"}),Object(s.jsx)("br",{}),"Classes"]})]}),Object(s.jsx)("div",{className:"logout",children:Object(s.jsx)("p",{onClick:function(){localStorage.clear(),e.setLoggedIn(!1)},children:Object(s.jsx)(p.a,{})})})]}),Object(s.jsxs)("div",{className:"content-container",children:[Object(s.jsxs)("div",{className:"breadcrumb",children:["default"===i&&Object(s.jsx)("p",{children:"Dashboard"}),"teachers"===i&&Object(s.jsx)("p",{children:"Teachers"}),"classes"===i&&Object(s.jsx)("p",{children:"Classes"}),"class"===i&&Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{onClick:_,children:"Classes"})," > ",E.name]})]}),"default"===i&&Object(s.jsxs)("div",{className:"default-container",children:["admin"===n.authority&&Object(s.jsxs)("div",{className:"section-card",children:[Object(s.jsx)("h1",{children:"Teachers"}),Object(s.jsx)(g.a,{className:"icon"}),Object(s.jsx)("button",{onClick:P,children:"View"})]}),"teacher"===n.authority&&Object(s.jsxs)("div",{className:"section-card",children:[Object(s.jsx)("h1",{children:"Classes"}),Object(s.jsx)(x.a,{className:"icon"}),Object(s.jsx)("button",{onClick:_,children:"View"})]})]}),"teachers"===i&&Object(s.jsx)(b,{setView:j,teachers:w,setTeachers:C,readAllTeachers:P}),"classes"===i&&Object(s.jsx)(m,{setView:j,classes:D,classData:E,setClassData:A,readAllClasses:_}),"class"===i&&Object(s.jsx)(O,{setView:j,classes:D,classData:E,setClassData:A})]})]})};var w=function(){var e=Object(c.useState)(!1),a=Object(o.a)(e,2),t=a[0],n=a[1];return Object(s.jsx)(j,{children:Object(s.jsxs)("div",{className:"app",children:[!t&&Object(s.jsx)(h,{setLoggedIn:n}),t&&Object(s.jsx)(k,{setLoggedIn:n})]})})};r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.70f09ea0.chunk.js.map