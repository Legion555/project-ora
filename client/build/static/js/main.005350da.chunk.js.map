{"version":3,"sources":["components/LoginForm.js","components/Dashboard.js","App.js","index.js"],"names":["LoginForm","props","useState","view","loginEmail","setLoginEmail","loginPassword","setLoginPassword","regName","setRegName","regEmail","setRegEmail","regPassword","setRegPassword","useEffect","details","email","localStorage","getItem","password","axios","post","then","response","setLoggedIn","className","onChange","e","target","value","placeholder","name","onClick","preventDefault","userToken","headers","setItem","payload","Dashboard","classData","setClassData","classes","setClasses","addClassName","setAddClassName","addClassBook","setAddClassBook","addClassLocalTeacher","setAddClassLocalTeacher","setView","studentName","setStudentName","studentAge","setStudentAge","renderCounter","setRenderCounter","get","res","console","log","data","catch","error","type","book","localTeacher","students","map","_class","length","id","getClassData","_id","newClassData","student","Math","floor","random","push","put","err","age","removeIndex","indexOf","splice","deleteStudent","clear","App","userData","setUserData","loggedIn","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.005350da.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst LoginForm = (props) => {\r\n    //View\r\n    const [view, setView] = useState('login');\r\n    //Login\r\n    const [loginEmail, setLoginEmail] = useState('');\r\n    const [loginPassword, setLoginPassword] = useState('');\r\n    //Register\r\n    const [regName, setRegName] = useState('');\r\n    const [regEmail, setRegEmail] = useState('');\r\n    const [regPassword, setRegPassword] = useState('');\r\n\r\n    useEffect(() => {\r\n        const userEmail = localStorage.getItem('userEmail');\r\n        const userPassword = localStorage.getItem('userPassword');\r\n        const details = {\r\n            email: userEmail,\r\n            password: userPassword\r\n        }\r\n        axios.post('/api/users/login', details)\r\n        .then(function (response) {\r\n            props.setLoggedIn(true);\r\n        })\r\n    }, []);\r\n\r\n    //Login existing user - pass\r\n    const login = (e) => {\r\n        e.preventDefault();\r\n        const details = {\r\n            email: loginEmail,\r\n            password: loginPassword\r\n        }\r\n        axios.post('/api/users/login', details)\r\n        .then(function (response) {\r\n            const userToken = response.headers[\"auth-token\"];\r\n            localStorage.setItem('userToken', userToken);\r\n            localStorage.setItem('userEmail', loginEmail);\r\n            localStorage.setItem('userPassword', loginPassword);\r\n            props.setLoggedIn(true);\r\n        })\r\n    }\r\n    //Register new user\r\n    const register = (e) => {\r\n        e.preventDefault();\r\n        const payload = {\r\n        name: regName,\r\n        email: regEmail,\r\n        password: regPassword\r\n        }\r\n        axios.post('/api/users/register', payload)\r\n        .then(function (response) {\r\n        setRegName(''); setRegEmail(''); setRegPassword('');\r\n        })\r\n    }\r\n    \r\n    return (\r\n        <div className=\"auth-container\">\r\n            {view === 'login' &&\r\n            <div className=\"login-container\">\r\n                <input onChange={(e) => setLoginEmail(e.target.value)} placeholder=\"Email\" name=\"email\" value={loginEmail}></input>\r\n                <input onChange={(e) => setLoginPassword(e.target.value)} placeholder=\"Password\" name=\"password\" value={loginPassword}></input>\r\n                <button onClick={login}>Login</button>\r\n            </div>\r\n            }\r\n            {view === 'register' &&\r\n            <div className=\"register-container\">\r\n                <form className=\"input-main\">\r\n                <input onChange={(e) => setRegName(e.target.value)} placeholder=\"Name\" name=\"name\" value={regName}></input>\r\n                <input onChange={(e) => setRegEmail(e.target.value)} placeholder=\"Email\" name=\"email\" value={regEmail}></input>\r\n                <input onChange={(e) => setRegPassword(e.target.value)} placeholder=\"Password\" name=\"password\" value={regPassword}></input>\r\n                <button onClick={register}>Register</button>\r\n                </form>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginForm","import {useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Dashboard = (props) => {\r\n    const [classData, setClassData] = useState({});\r\n    const [classes, setClasses] = useState({});\r\n    //Add class\r\n    const [addClassName, setAddClassName] = useState('');\r\n    const [addClassBook, setAddClassBook] = useState('');\r\n    const [addClassLocalTeacher, setAddClassLocalTeacher] = useState('');\r\n    \r\n    const [studentData, setStudentData] = useState([]);\r\n    const [view, setView] = useState('');\r\n    //Add student\r\n    const [studentName, setStudentName] = useState('');\r\n    const [studentAge, setStudentAge] = useState('');\r\n    const [studentClass, setStudentClass] = useState('');\r\n\r\n    const [renderCounter, setRenderCounter] = useState(0);\r\n    \r\n    //FUNCTIONS\r\n    const numGen = () => {\r\n        return Math.floor(Math.random() * 100000);\r\n    }\r\n\r\n    const logout = () => {\r\n        localStorage.clear();\r\n        props.setLoggedIn(false);\r\n    }\r\n\r\n    const getStudentData = () => {\r\n        axios.get('./api/students/')\r\n        .then((res) => {\r\n        console.log(res.data);\r\n        setStudentData(res.data);\r\n        setView('students');\r\n        })\r\n        .catch((error) => {\r\n        console.error(\"Error: \" + error)\r\n        })\r\n    }\r\n    const getOneStudent = (id) => {\r\n        axios.get('./api/students/' + id)\r\n        .then((res) => {\r\n        console.log(res.data);\r\n        })\r\n        .catch((error) => {\r\n        console.error(\"Error: \" + error)\r\n        })\r\n    }\r\n\r\n    const createClass = (e) => {\r\n        e.preventDefault();\r\n        const payload = {\r\n            name: addClassName,\r\n            book: addClassBook,\r\n            localTeacher: addClassLocalTeacher,\r\n            students: []\r\n        }\r\n        axios.post('/api/classes/create', payload)\r\n        .then(function (response) {\r\n            console.log('Class added successfully.');\r\n            setAddClassName(''); setAddClassBook(''); setAddClassLocalTeacher('');\r\n        })\r\n    }\r\n    const readAllClasses = () => {\r\n        const userToken = localStorage.getItem('userToken');\r\n        axios.get('./api/classes', {\r\n        headers: {\r\n            'auth-token': userToken\r\n        }\r\n        })\r\n        .then((res) => {\r\n            console.log(res.data);\r\n            setClasses(res.data);\r\n            setView('classes');\r\n        })\r\n        .catch((error) => {\r\n            console.error(\"Error: \" + error)\r\n        })\r\n    }\r\n    const getClassData = (id) => {\r\n        const userToken = localStorage.getItem('userToken');\r\n        axios.get('./api/classes/' + id, {\r\n        headers: {\r\n            'auth-token': userToken\r\n        }\r\n        })\r\n        .then((res) => {\r\n            console.log(res.data[0]);\r\n            setClassData(res.data[0]);\r\n            setView('class');\r\n        })\r\n\r\n        .catch((error) => {\r\n            console.error(\"Error: \" + error)\r\n        })\r\n    }\r\n    \r\n    //Add student\r\n    const createStudent = (e) => {\r\n        e.preventDefault();\r\n        const newClassData = classData;\r\n        const student = {\r\n          \"name\": studentName,\r\n          \"age\": studentAge,\r\n          \"class\": classData.name,\r\n          \"_id\": numGen()\r\n        }\r\n        newClassData.students.push(student);\r\n        axios.put(\"/api/classes/createStudent\", classData)\r\n        .then((res) => {\r\n            console.log(res.data);\r\n            setClassData(newClassData);\r\n            setStudentName(''); setStudentAge('');\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }\r\n    //Remove student\r\n    const deleteStudent = (id) => {\r\n        const newClassData = classData;\r\n        let removeIndex = newClassData.students.map(function(student) { return student._id; }).indexOf(id);\r\n        newClassData.students.splice(removeIndex, 1);\r\n        axios.put(\"/api/classes/deleteStudent\", newClassData)\r\n        .then((res) => {\r\n            console.log(res.data);\r\n            setClassData(newClassData);\r\n            setRenderCounter(renderCounter + 1);\r\n        })\r\n        .catch((err) => {\r\n            console.log(err);\r\n        })\r\n    }\r\n  \r\n    return (\r\n        <div className=\"dashboard\">\r\n            <div className=\"view-selector\">\r\n                <a onClick={readAllClasses}>View classes</a>\r\n            </div>\r\n            <form className=\"add-class-container\">\r\n                <input type=\"text\" value={addClassName} placeholder=\"Class name\" onChange={(e) => setAddClassName(e.target.value)}></input>\r\n                <input type=\"text\" value={addClassBook} placeholder=\"Class book\" onChange={(e) => setAddClassBook(e.target.value)}></input>\r\n                <input type=\"text\" value={addClassLocalTeacher} placeholder=\"Local teacher\" onChange={(e) => setAddClassLocalTeacher(e.target.value)}></input>\r\n                <button onClick={createClass}>Add class</button>\r\n            </form>\r\n            <div className=\"content-container\">\r\n                <div className=\"classes-container\">\r\n                    {view === 'classes' && classes.map(_class => \r\n                    <div className=\"class-card\" key={_class._id}>\r\n                        <h3>{_class.name}</h3>\r\n                        <p>Book: {_class.book}</p>\r\n                        <p>Students: {_class.students.length}</p>\r\n                        <button onClick={(id) => getClassData(_class._id)}>View class</button>\r\n                    </div>\r\n                    )}\r\n                </div>\r\n                {view === 'class' &&\r\n                <div className=\"class-dashboard\">\r\n                    <div className=\"class-details-container\">\r\n                        <h2>{classData.name}</h2>\r\n                        <h2>{classData.book}</h2>\r\n                        <h2>{classData.localTeacher}</h2>\r\n                    </div>\r\n                    <form className=\"add-student-container\">\r\n                        <input type=\"text\" value={studentName} placeholder=\"name...\" onChange={(e) => setStudentName(e.target.value)}></input>\r\n                        <input type=\"text\" value={studentAge} placeholder=\"age...\" onChange={(e) => setStudentAge(e.target.value)}></input>\r\n                        <button onClick={createStudent}>Add student</button>\r\n                    </form>\r\n                    <div className=\"students-container\">\r\n                        {classData.students.map(student =>\r\n                            <div className=\"student-card\">\r\n                                <h3>{student.name}</h3>\r\n                                <p>Age: {student.age}</p>\r\n                                <button onClick={(id) => deleteStudent(student._id)}>Remove student</button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                }\r\n            </div>\r\n            <div className=\"logout-container\">\r\n                <a onClick={logout}>Logout</a>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dashboard","import {useState, useEffect} from 'react';\nimport './App.css';\nimport LoginForm from './components/LoginForm';\nimport Dashboard from './components/Dashboard';\n\nfunction App() {\n  //STATE\n  //User data\n  const [userData, setUserData] = useState({});\n  const [loggedIn, setLoggedIn] = useState(false);\n\n  //RENDER\n  return (\n    <div className=\"app\">\n      {!loggedIn &&\n        <LoginForm userData={userData} setUserData={setUserData} setLoggedIn={setLoggedIn} />\n      }\n      {loggedIn &&\n        <Dashboard setLoggedIn={setLoggedIn}/>\n      }\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}