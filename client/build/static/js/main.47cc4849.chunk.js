(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(2),n=a.n(c),l=a(16),r=a.n(l),o=(a(25),a(3)),i=(a(26),a(4)),u=a.n(i),j=Object(c.createContext)(),d=function(e){var t=Object(c.useState)({}),a=Object(o.a)(t,2),n=a[0],l=a[1];return Object(s.jsx)(j.Provider,{value:[n,l],children:e.children})},h=function(e){var t=Object(c.useContext)(j),a=Object(o.a)(t,2),n=(a[0],a[1]),l=Object(c.useState)("login"),r=Object(o.a)(l,2),i=r[0],d=r[1],h=Object(c.useState)(""),b=Object(o.a)(h,2),O=b[0],x=b[1],g=Object(c.useState)(""),m=Object(o.a)(g,2),p=m[0],f=m[1],v=Object(c.useState)(""),C=Object(o.a)(v,2),k=C[0],N=C[1],S=Object(c.useState)(""),D=Object(o.a)(S,2),w=D[0],I=D[1],T=Object(c.useState)(""),A=Object(o.a)(T,2),E=A[0],L=A[1];Object(c.useEffect)((function(){var t=localStorage.getItem("userEmail"),a=localStorage.getItem("userPassword");if(null!==t){var s={email:t,password:a};u.a.post("/api/users/login",s).then((function(a){e.setLoggedIn(!0),u.a.get("/api/users",{params:{email:t}}).then((function(e){var t=e.data;n(t),console.log(t)})).catch((function(e){console.log(e)}))}))}}),[]);return Object(s.jsxs)("div",{className:"auth-container",children:["login"===i&&Object(s.jsxs)("div",{className:"login-container",children:[Object(s.jsx)("h1",{children:"Login with an existing account"}),Object(s.jsx)("input",{onChange:function(e){return x(e.target.value)},placeholder:"Email",name:"email",value:O}),Object(s.jsx)("input",{onChange:function(e){return f(e.target.value)},placeholder:"Password",name:"password",value:p}),Object(s.jsx)("button",{onClick:function(t,a,s){t.preventDefault();var c={email:O,password:p};u.a.post("/api/users/login",c).then((function(t){var a=t.headers["auth-token"];localStorage.setItem("userToken",a),localStorage.setItem("userEmail",O),localStorage.setItem("userPassword",p),e.setLoggedIn(!0),u.a.get("/api/users",{params:{email:O}}).then((function(e){var t=e.data;n(t),console.log(t)})).catch((function(e){console.log(e)}))}))},children:"Login"}),Object(s.jsx)("p",{className:"register-link",onClick:function(){return d("register")},children:"Register a new account"})]}),"register"===i&&Object(s.jsxs)("div",{className:"register-container",children:[Object(s.jsx)("h1",{children:"Register a new account"}),Object(s.jsxs)("form",{className:"input-main",children:[Object(s.jsx)("input",{onChange:function(e){return N(e.target.value)},placeholder:"Name",name:"name",value:k}),Object(s.jsx)("input",{onChange:function(e){return I(e.target.value)},placeholder:"Email",name:"email",value:w}),Object(s.jsx)("input",{onChange:function(e){return L(e.target.value)},placeholder:"Password",name:"password",value:E}),Object(s.jsx)("button",{onClick:function(e){e.preventDefault();var t={name:k,email:w,password:E};u.a.post("/api/users/register",t).then((function(e){N(""),I(""),L("")}))},children:"Register"})]}),Object(s.jsx)("p",{className:"login-link",onClick:function(){return d("login")},children:"Login with an existing account"})]})]})},b=function(e){return Object(s.jsx)("div",{className:"teachers-container",children:Object(s.jsx)("div",{className:"teacher-cards",children:e.teachers.map((function(t){return Object(s.jsxs)("div",{className:"class-card",children:[Object(s.jsx)("h3",{children:t.name}),Object(s.jsxs)("p",{children:["Auth status: ",t.isAuthed?"Authorized":"Unauthorized"]}),Object(s.jsx)("button",{onClick:function(a){return function(t,a){t.preventDefault(),u.a.put("/api/teachers/authTeacher/"+a).then((function(t){console.log(t.data),e.readAllTeachers()})).catch((function(e){console.log(e)}))}(a,t._id)},children:"Authorize"})]},t._id)}))})})},O=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],l=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],d=i[1],h=Object(c.useState)(""),b=Object(o.a)(h,2),O=b[0],x=b[1];return Object(s.jsxs)("div",{className:"classes-container",children:[Object(s.jsxs)("form",{className:"add-class",children:[Object(s.jsx)("input",{type:"text",value:n,placeholder:"Class name",onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:j,placeholder:"Class book",onChange:function(e){return d(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:O,placeholder:"Local teacher",onChange:function(e){return x(e.target.value)}}),Object(s.jsx)("button",{onClick:function(t){t.preventDefault();var a={name:n,book:j,localTeacher:O,students:[]};u.a.post("/api/classes/create",a).then((function(t){console.log("Class added successfully."),e.readAllClasses(),l(""),d(""),x("")}))},children:"Add class"})]}),Object(s.jsx)("div",{className:"class-cards",children:e.classes.map((function(t){return Object(s.jsxs)("div",{className:"class-card",children:[Object(s.jsx)("h3",{children:t.name}),Object(s.jsxs)("p",{children:["Book: ",t.book]}),Object(s.jsxs)("p",{children:["Students: ",t.students.length]}),Object(s.jsx)("button",{onClick:function(a){return function(t){var a=localStorage.getItem("userToken");u.a.get("./api/classes/"+t,{headers:{"auth-token":a}}).then((function(t){console.log(t.data[0]),e.setClassData(t.data[0]),e.setView("class")})).catch((function(e){console.error("Error: "+e)}))}(t._id)},children:"View class"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{onClick:function(a){return function(t){u.a.delete("/api/classes/delete/"+t).then((function(t){console.log("Class deleted"),e.readAllClasses()})).catch((function(e){console.log(e)}))}(t._id)},className:"delete-class-button",children:"Delete class"})]},t._id)}))})]})},x=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],l=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],d=i[1],h=function(t){var a=e.classData,s=a.students.map((function(e){return e._id})).indexOf(t);a.students.splice(s,1),u.a.put("/api/classes/deleteStudent",a).then((function(t){console.log(t.data),function(t){var a=localStorage.getItem("userToken");u.a.get("./api/classes/"+t,{headers:{"auth-token":a}}).then((function(t){console.log(t.data[0]),e.setClassData(t.data[0])})).catch((function(e){console.error("Error: "+e)}))}(e.classData._id)})).catch((function(e){console.log(e)}))};return Object(s.jsxs)("div",{className:"class-container",children:[Object(s.jsxs)("div",{className:"class-details-container",children:[Object(s.jsx)("h2",{children:e.classData.name}),Object(s.jsx)("h2",{children:e.classData.book}),Object(s.jsx)("h2",{children:e.classData.localTeacher})]}),Object(s.jsxs)("form",{className:"add-student-container",children:[Object(s.jsx)("input",{type:"text",value:n,placeholder:"name...",onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:j,placeholder:"age...",onChange:function(e){return d(e.target.value)}}),Object(s.jsx)("button",{onClick:function(t){t.preventDefault();var a=e.classData,s={name:n,age:j,class:e.classData.name,_id:Math.floor(1e5*Math.random())};a.students.push(s),u.a.put("/api/classes/createStudent",e.classData).then((function(e){console.log(e.data),l(""),d("")})).catch((function(e){console.log(e)}))},children:"Add student"})]}),Object(s.jsx)("div",{className:"students-container",children:e.classData.students.map((function(e){return Object(s.jsxs)("div",{className:"student-card",children:[Object(s.jsx)("h3",{children:e.name}),Object(s.jsxs)("p",{children:["Age: ",e.age]}),Object(s.jsx)("button",{onClick:function(t){return h(e._id)},children:"Remove student"})]})}))})]})},g=a(19),m=a(18),p=a(7),f=a(17),v=a.p+"static/media/circle.423a605e.png",C=function(e){var t=Object(c.useContext)(j),a=Object(o.a)(t,2),n=a[0],l=(a[1],Object(c.useState)("default")),r=Object(o.a)(l,2),i=r[0],d=r[1],h=Object(c.useState)({}),C=Object(o.a)(h,2),k=C[0],N=C[1],S=Object(c.useState)({}),D=Object(o.a)(S,2),w=D[0],I=D[1],T=Object(c.useState)({}),A=Object(o.a)(T,2),E=A[0],L=A[1],_=function(){var e=localStorage.getItem("userToken");u.a.get("./api/teachers",{headers:{"auth-token":e}}).then((function(e){console.log(e.data),N(e.data),d("teachers")})).catch((function(e){console.error("Error: "+e)}))},y=function(){var e=localStorage.getItem("userToken");u.a.get("./api/classes",{headers:{"auth-token":e}}).then((function(e){console.log(e.data),I(e.data),d("classes")})).catch((function(e){console.error("Error: "+e)}))};return Object(s.jsxs)("div",{className:"dashboard",children:[Object(s.jsxs)("div",{className:"navigation-container",children:[Object(s.jsxs)("div",{className:"links",children:[Object(s.jsx)("img",{src:v,alt:"profile",width:"60px"}),Object(s.jsxs)("p",{children:["Welcome ",n.name]}),Object(s.jsxs)("p",{className:"link",onClick:function(){return d("default")},children:[Object(s.jsx)(f.a,{className:"icon"}),Object(s.jsx)("br",{}),"Dashboard"]}),"admin"===n.authority&&Object(s.jsxs)("p",{className:"link",onClick:_,children:[Object(s.jsx)(m.a,{className:"icon"}),Object(s.jsx)("br",{}),"Teachers"]}),Object(s.jsxs)("p",{className:"link",onClick:y,children:[Object(s.jsx)(p.a,{className:"icon"}),Object(s.jsx)("br",{}),"Classes"]})]}),Object(s.jsx)("div",{className:"logout",children:Object(s.jsx)("p",{onClick:function(){localStorage.clear(),e.setLoggedIn(!1)},children:Object(s.jsx)(g.a,{})})})]}),Object(s.jsxs)("div",{className:"content-container",children:[Object(s.jsxs)("div",{className:"breadcrumb",children:["default"===i&&Object(s.jsx)("p",{children:"Dashboard"}),"teachers"===i&&Object(s.jsx)("p",{children:"Teachers"}),"classes"===i&&Object(s.jsx)("p",{children:"Classes"}),"class"===i&&Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{onClick:y,children:"Classes"})," > ",E.name]})]}),"default"===i&&Object(s.jsx)("div",{className:"default-container",children:Object(s.jsxs)("div",{className:"section-card",children:[Object(s.jsx)("h1",{children:"Classes"}),Object(s.jsx)(p.a,{className:"icon"}),Object(s.jsx)("button",{onClick:y,children:"View"})]})}),"teachers"===i&&Object(s.jsx)(b,{setView:d,teachers:k,setTeachers:N,readAllTeachers:_}),"classes"===i&&Object(s.jsx)(O,{setView:d,classes:w,classData:E,setClassData:L,readAllClasses:y}),"class"===i&&Object(s.jsx)(x,{setView:d,classes:w,classData:E,setClassData:L})]})]})};var k=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(s.jsx)(d,{children:Object(s.jsxs)("div",{className:"app",children:[!a&&Object(s.jsx)(h,{setLoggedIn:n}),a&&Object(s.jsx)(C,{setLoggedIn:n})]})})};r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(k,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.47cc4849.chunk.js.map