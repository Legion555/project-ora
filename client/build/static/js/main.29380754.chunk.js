(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,a){},26:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(2),n=a.n(c),l=a(16),r=a.n(l),o=(a(25),a(3)),i=(a(26),a(4)),u=a.n(i),j=function(e){var t=Object(c.useState)("login"),a=Object(o.a)(t,2),n=a[0],l=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],d=i[1],b=Object(c.useState)(""),h=Object(o.a)(b,2),O=h[0],g=h[1],x=Object(c.useState)(""),m=Object(o.a)(x,2),p=m[0],f=m[1],v=Object(c.useState)(""),C=Object(o.a)(v,2),k=C[0],N=C[1],D=Object(c.useState)(""),S=Object(o.a)(D,2),w=S[0],I=S[1];Object(c.useEffect)((function(){var t=localStorage.getItem("userEmail"),a=localStorage.getItem("userPassword");if(null!==t){var s={email:t,password:a};u.a.post("/api/users/login",s).then((function(a){e.setLoggedIn(!0),u.a.get("/api/users",{params:{email:t}}).then((function(t){var a=t.data;e.setUserData(a),console.log(a)})).catch((function(e){console.log(e)}))}))}}),[]);return Object(s.jsxs)("div",{className:"auth-container",children:["login"===n&&Object(s.jsxs)("div",{className:"login-container",children:[Object(s.jsx)("h1",{children:"Login with an existing account"}),Object(s.jsx)("input",{onChange:function(e){return d(e.target.value)},placeholder:"Email",name:"email",value:j}),Object(s.jsx)("input",{onChange:function(e){return g(e.target.value)},placeholder:"Password",name:"password",value:O}),Object(s.jsx)("button",{onClick:function(t,a,s){t.preventDefault();var c={email:j,password:O};u.a.post("/api/users/login",c).then((function(t){var a=t.headers["auth-token"];localStorage.setItem("userToken",a),localStorage.setItem("userEmail",j),localStorage.setItem("userPassword",O),e.setLoggedIn(!0),u.a.get("/api/users",{params:{email:j}}).then((function(t){var a=t.data;e.setUserData(a),console.log(a)})).catch((function(e){console.log(e)}))}))},children:"Login"}),Object(s.jsx)("p",{className:"register-link",onClick:function(){return l("register")},children:"Register a new account"})]}),"register"===n&&Object(s.jsxs)("div",{className:"register-container",children:[Object(s.jsx)("h1",{children:"Register a new account"}),Object(s.jsxs)("form",{className:"input-main",children:[Object(s.jsx)("input",{onChange:function(e){return f(e.target.value)},placeholder:"Name",name:"name",value:p}),Object(s.jsx)("input",{onChange:function(e){return N(e.target.value)},placeholder:"Email",name:"email",value:k}),Object(s.jsx)("input",{onChange:function(e){return I(e.target.value)},placeholder:"Password",name:"password",value:w}),Object(s.jsx)("button",{onClick:function(e){e.preventDefault();var t={name:p,email:k,password:w};u.a.post("/api/users/register",t).then((function(e){f(""),N(""),I("")}))},children:"Register"})]}),Object(s.jsx)("p",{className:"login-link",onClick:function(){return l("login")},children:"Login with an existing account"})]})]})},d=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],l=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],d=i[1],b=Object(c.useState)(""),h=Object(o.a)(b,2),O=h[0],g=h[1];return Object(s.jsxs)("div",{className:"classes-container",children:[Object(s.jsxs)("form",{className:"add-class",children:[Object(s.jsx)("input",{type:"text",value:n,placeholder:"Class name",onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:j,placeholder:"Class book",onChange:function(e){return d(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:O,placeholder:"Local teacher",onChange:function(e){return g(e.target.value)}}),Object(s.jsx)("button",{onClick:function(t){t.preventDefault();var a={name:n,book:j,localTeacher:O,students:[]};u.a.post("/api/classes/create",a).then((function(t){console.log("Class added successfully."),e.readAllClasses(),l(""),d(""),g("")}))},children:"Add class"})]}),Object(s.jsx)("div",{className:"class-cards",children:e.classes.map((function(t){return Object(s.jsxs)("div",{className:"class-card",children:[Object(s.jsx)("h3",{children:t.name}),Object(s.jsxs)("p",{children:["Book: ",t.book]}),Object(s.jsxs)("p",{children:["Students: ",t.students.length]}),Object(s.jsx)("button",{onClick:function(a){return function(t){var a=localStorage.getItem("userToken");u.a.get("./api/classes/"+t,{headers:{"auth-token":a}}).then((function(t){console.log(t.data[0]),e.setClassData(t.data[0]),e.setView("class")})).catch((function(e){console.error("Error: "+e)}))}(t._id)},children:"View class"}),Object(s.jsx)("br",{}),Object(s.jsx)("button",{onClick:function(a){return function(t){u.a.delete("/api/classes/delete/"+t).then((function(t){console.log("Class deleted"),e.readAllClasses()})).catch((function(e){console.log(e)}))}(t._id)},className:"delete-class-button",children:"Delete class"})]},t._id)}))})]})},b=function(e){var t=Object(c.useState)(""),a=Object(o.a)(t,2),n=a[0],l=a[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),j=i[0],d=i[1],b=function(t){var a=e.classData,s=a.students.map((function(e){return e._id})).indexOf(t);a.students.splice(s,1),u.a.put("/api/classes/deleteStudent",a).then((function(t){console.log(t.data),function(t){var a=localStorage.getItem("userToken");u.a.get("./api/classes/"+t,{headers:{"auth-token":a}}).then((function(t){console.log(t.data[0]),e.setClassData(t.data[0])})).catch((function(e){console.error("Error: "+e)}))}(e.classData._id)})).catch((function(e){console.log(e)}))};return Object(s.jsxs)("div",{className:"class-container",children:[Object(s.jsxs)("div",{className:"class-details-container",children:[Object(s.jsx)("h2",{children:e.classData.name}),Object(s.jsx)("h2",{children:e.classData.book}),Object(s.jsx)("h2",{children:e.classData.localTeacher})]}),Object(s.jsxs)("form",{className:"add-student-container",children:[Object(s.jsx)("input",{type:"text",value:n,placeholder:"name...",onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("input",{type:"text",value:j,placeholder:"age...",onChange:function(e){return d(e.target.value)}}),Object(s.jsx)("button",{onClick:function(t){t.preventDefault();var a=e.classData,s={name:n,age:j,class:e.classData.name,_id:Math.floor(1e5*Math.random())};a.students.push(s),u.a.put("/api/classes/createStudent",e.classData).then((function(e){console.log(e.data),l(""),d("")})).catch((function(e){console.log(e)}))},children:"Add student"})]}),Object(s.jsx)("div",{className:"students-container",children:e.classData.students.map((function(e){return Object(s.jsxs)("div",{className:"student-card",children:[Object(s.jsx)("h3",{children:e.name}),Object(s.jsxs)("p",{children:["Age: ",e.age]}),Object(s.jsx)("button",{onClick:function(t){return b(e._id)},children:"Remove student"})]})}))})]})},h=a(19),O=a(18),g=a(7),x=a(17),m=a.p+"static/media/circle.423a605e.png",p=function(e){var t=Object(c.useState)("default"),a=Object(o.a)(t,2),n=a[0],l=a[1],r=Object(c.useState)({}),i=Object(o.a)(r,2),j=i[0],p=i[1],f=Object(c.useState)({}),v=Object(o.a)(f,2),C=v[0],k=v[1],N=function(){var e=localStorage.getItem("userToken");u.a.get("./api/classes",{headers:{"auth-token":e}}).then((function(e){console.log(e.data),p(e.data),l("classes")})).catch((function(e){console.error("Error: "+e)}))};return Object(s.jsxs)("div",{className:"dashboard",children:[Object(s.jsxs)("div",{className:"navigation-container",children:[Object(s.jsxs)("div",{className:"links",children:[Object(s.jsx)("img",{src:m,alt:"profile",width:"60px"}),Object(s.jsxs)("p",{children:["Welcome ",e.userData.name]}),Object(s.jsxs)("p",{onClick:function(){return l("default")},className:"link",children:[Object(s.jsx)(x.a,{className:"icon"}),Object(s.jsx)("br",{}),"Dashboard"]}),Object(s.jsxs)("p",{className:"link",children:[Object(s.jsx)(O.a,{className:"icon"}),Object(s.jsx)("br",{}),"Teachers"]}),Object(s.jsxs)("p",{onClick:N,className:"link",children:[Object(s.jsx)(g.a,{className:"icon"}),Object(s.jsx)("br",{}),"Classes"]})]}),Object(s.jsx)("div",{className:"logout",children:Object(s.jsx)("p",{onClick:function(){localStorage.clear(),e.setLoggedIn(!1)},children:Object(s.jsx)(h.a,{})})})]}),Object(s.jsxs)("div",{className:"content-container",children:[Object(s.jsxs)("div",{className:"breadcrumb",children:["default"===n&&Object(s.jsx)("p",{children:"Dashboard"}),"classes"===n&&Object(s.jsx)("p",{children:"Classes"}),"class"===n&&Object(s.jsxs)("p",{children:[Object(s.jsx)("span",{onClick:N,children:"Classes"})," > ",C.name]})]}),"default"===n&&Object(s.jsx)("div",{className:"default-container",children:Object(s.jsxs)("div",{className:"section-card",children:[Object(s.jsx)("h1",{children:"Classes"}),Object(s.jsx)(g.a,{className:"icon"}),Object(s.jsx)("button",{onClick:N,children:"View"})]})}),"classes"===n&&Object(s.jsx)(d,{setView:l,classes:j,classData:C,setClassData:k,readAllClasses:N}),"class"===n&&Object(s.jsx)(b,{setView:l,classes:j,classData:C,setClassData:k})]})]})};var f=function(){var e=Object(c.useState)({}),t=Object(o.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)(!1),r=Object(o.a)(l,2),i=r[0],u=r[1];return Object(s.jsxs)("div",{className:"app",children:[!i&&Object(s.jsx)(j,{userData:a,setUserData:n,setLoggedIn:u}),i&&Object(s.jsx)(p,{userData:a,setUserData:n,setLoggedIn:u})]})};r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(f,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.29380754.chunk.js.map