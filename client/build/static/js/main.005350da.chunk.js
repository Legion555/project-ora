(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,a){},21:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a.n(c),o=a(14),r=a.n(o),l=(a(20),a(2)),i=(a(21),a(4)),u=a.n(i),j=function(e){var t=Object(c.useState)("login"),a=Object(l.a)(t,2),s=a[0],o=(a[1],Object(c.useState)("")),r=Object(l.a)(o,2),i=r[0],j=r[1],d=Object(c.useState)(""),b=Object(l.a)(d,2),h=b[0],O=b[1],g=Object(c.useState)(""),p=Object(l.a)(g,2),m=p[0],f=p[1],v=Object(c.useState)(""),x=Object(l.a)(v,2),S=x[0],k=x[1],C=Object(c.useState)(""),N=Object(l.a)(C,2),w=N[0],I=N[1];Object(c.useEffect)((function(){var t={email:localStorage.getItem("userEmail"),password:localStorage.getItem("userPassword")};u.a.post("/api/users/login",t).then((function(t){e.setLoggedIn(!0)}))}),[]);return Object(n.jsxs)("div",{className:"auth-container",children:["login"===s&&Object(n.jsxs)("div",{className:"login-container",children:[Object(n.jsx)("input",{onChange:function(e){return j(e.target.value)},placeholder:"Email",name:"email",value:i}),Object(n.jsx)("input",{onChange:function(e){return O(e.target.value)},placeholder:"Password",name:"password",value:h}),Object(n.jsx)("button",{onClick:function(t){t.preventDefault();var a={email:i,password:h};u.a.post("/api/users/login",a).then((function(t){var a=t.headers["auth-token"];localStorage.setItem("userToken",a),localStorage.setItem("userEmail",i),localStorage.setItem("userPassword",h),e.setLoggedIn(!0)}))},children:"Login"})]}),"register"===s&&Object(n.jsx)("div",{className:"register-container",children:Object(n.jsxs)("form",{className:"input-main",children:[Object(n.jsx)("input",{onChange:function(e){return f(e.target.value)},placeholder:"Name",name:"name",value:m}),Object(n.jsx)("input",{onChange:function(e){return k(e.target.value)},placeholder:"Email",name:"email",value:S}),Object(n.jsx)("input",{onChange:function(e){return I(e.target.value)},placeholder:"Password",name:"password",value:w}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault();var t={name:m,email:S,password:w};u.a.post("/api/users/register",t).then((function(e){f(""),k(""),I("")}))},children:"Register"})]})})]})},d=function(e){var t=Object(c.useState)({}),a=Object(l.a)(t,2),s=a[0],o=a[1],r=Object(c.useState)({}),i=Object(l.a)(r,2),j=i[0],d=i[1],b=Object(c.useState)(""),h=Object(l.a)(b,2),O=h[0],g=h[1],p=Object(c.useState)(""),m=Object(l.a)(p,2),f=m[0],v=m[1],x=Object(c.useState)(""),S=Object(l.a)(x,2),k=S[0],C=S[1],N=Object(c.useState)([]),w=Object(l.a)(N,2),I=(w[0],w[1],Object(c.useState)("")),E=Object(l.a)(I,2),L=E[0],y=E[1],D=Object(c.useState)(""),T=Object(l.a)(D,2),_=T[0],P=T[1],A=Object(c.useState)(""),M=Object(l.a)(A,2),B=M[0],J=M[1],R=Object(c.useState)(""),V=Object(l.a)(R,2),U=(V[0],V[1],Object(c.useState)(0)),q=Object(l.a)(U,2),z=q[0],F=q[1];return Object(n.jsxs)("div",{className:"dashboard",children:[Object(n.jsx)("div",{className:"view-selector",children:Object(n.jsx)("a",{onClick:function(){var e=localStorage.getItem("userToken");u.a.get("./api/classes",{headers:{"auth-token":e}}).then((function(e){console.log(e.data),d(e.data),y("classes")})).catch((function(e){console.error("Error: "+e)}))},children:"View classes"})}),Object(n.jsxs)("form",{className:"add-class-container",children:[Object(n.jsx)("input",{type:"text",value:O,placeholder:"Class name",onChange:function(e){return g(e.target.value)}}),Object(n.jsx)("input",{type:"text",value:f,placeholder:"Class book",onChange:function(e){return v(e.target.value)}}),Object(n.jsx)("input",{type:"text",value:k,placeholder:"Local teacher",onChange:function(e){return C(e.target.value)}}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault();var t={name:O,book:f,localTeacher:k,students:[]};u.a.post("/api/classes/create",t).then((function(e){console.log("Class added successfully."),g(""),v(""),C("")}))},children:"Add class"})]}),Object(n.jsxs)("div",{className:"content-container",children:[Object(n.jsx)("div",{className:"classes-container",children:"classes"===L&&j.map((function(e){return Object(n.jsxs)("div",{className:"class-card",children:[Object(n.jsx)("h3",{children:e.name}),Object(n.jsxs)("p",{children:["Book: ",e.book]}),Object(n.jsxs)("p",{children:["Students: ",e.students.length]}),Object(n.jsx)("button",{onClick:function(t){return function(e){var t=localStorage.getItem("userToken");u.a.get("./api/classes/"+e,{headers:{"auth-token":t}}).then((function(e){console.log(e.data[0]),o(e.data[0]),y("class")})).catch((function(e){console.error("Error: "+e)}))}(e._id)},children:"View class"})]},e._id)}))}),"class"===L&&Object(n.jsxs)("div",{className:"class-dashboard",children:[Object(n.jsxs)("div",{className:"class-details-container",children:[Object(n.jsx)("h2",{children:s.name}),Object(n.jsx)("h2",{children:s.book}),Object(n.jsx)("h2",{children:s.localTeacher})]}),Object(n.jsxs)("form",{className:"add-student-container",children:[Object(n.jsx)("input",{type:"text",value:_,placeholder:"name...",onChange:function(e){return P(e.target.value)}}),Object(n.jsx)("input",{type:"text",value:B,placeholder:"age...",onChange:function(e){return J(e.target.value)}}),Object(n.jsx)("button",{onClick:function(e){e.preventDefault();var t=s,a={name:_,age:B,class:s.name,_id:Math.floor(1e5*Math.random())};t.students.push(a),u.a.put("/api/classes/createStudent",s).then((function(e){console.log(e.data),o(t),P(""),J("")})).catch((function(e){console.log(e)}))},children:"Add student"})]}),Object(n.jsx)("div",{className:"students-container",children:s.students.map((function(e){return Object(n.jsxs)("div",{className:"student-card",children:[Object(n.jsx)("h3",{children:e.name}),Object(n.jsxs)("p",{children:["Age: ",e.age]}),Object(n.jsx)("button",{onClick:function(t){return function(e){var t=s,a=t.students.map((function(e){return e._id})).indexOf(e);t.students.splice(a,1),u.a.put("/api/classes/deleteStudent",t).then((function(e){console.log(e.data),o(t),F(z+1)})).catch((function(e){console.log(e)}))}(e._id)},children:"Remove student"})]})}))})]})]}),Object(n.jsx)("div",{className:"logout-container",children:Object(n.jsx)("a",{onClick:function(){localStorage.clear(),e.setLoggedIn(!1)},children:"Logout"})})]})};var b=function(){var e=Object(c.useState)({}),t=Object(l.a)(e,2),a=t[0],s=t[1],o=Object(c.useState)(!1),r=Object(l.a)(o,2),i=r[0],u=r[1];return Object(n.jsxs)("div",{className:"app",children:[!i&&Object(n.jsx)(j,{userData:a,setUserData:s,setLoggedIn:u}),i&&Object(n.jsx)(d,{setLoggedIn:u})]})};r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(b,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.005350da.chunk.js.map